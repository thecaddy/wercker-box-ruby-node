name: node-ruby
version: 1.1.0
inherits: wercker-labs/docker
type: main
platform: ubuntu@14.04
packages:
  - nodejs@0.12.1
description: |
  Wercker box with Node.js and Ruby on Ubuntu 14.04 
keywords:
  - nodejs
  - 0.12.1
  - nodejs 0.12.1
  - ubuntu
  - 14.04
  - ubuntu 14.04
  - wercker
  - webessentials
script: |
  export NODEVERSION=0.12.1
  sudo apt-get update
  sudo apt-get install -y wget build-essential git zlib1g-dev libreadline-dev libqtwebkit-dev curl
  wget -qO- https://get.docker.com/ | sh
  sudo service docker restart
  sudo usermod -aG docker ubuntu
  cd $HOME
  mkdir nodeinstall
  cd nodeinstall
  wget http://nodejs.org/dist/v$NODEVERSION/node-v$NODEVERSION.tar.gz
  tar xzf node-v$NODEVERSION.tar.gz
  cd node-v$NODEVERSION
  ./configure
  make
  sudo make install
  cd $HOME
  rm -fr nodeinstall
  node -v
  curl -sSL https://get.rvm.io | bash -s stable
  echo "bundler -v~>1.5.1" > $HOME/.rvm/gemsets/global.gems
  source $HOME/.rvm/scripts/rvm
  rvm install 2.2.1
  rvm --default use 2.2.1